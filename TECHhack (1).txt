<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>BMI Calculator & Diet Plan</title>

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

  <!-- Google Charts -->
  <script src="https://www.gstatic.com/charts/loader.js"></script>
  <!-- Chart.js for trend graph -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <link rel="stylesheet" href="style.css">
</head>
<body>

  <div class="container">
    <header class="card-header">
      <h1>Body Mass Index (BMI)</h1>
      <p class="subtitle">Calculate your BMI, see a visual trend and get a focused animated diet plan.</p>
    </header>

    <form class="input-section" onsubmit="event.preventDefault(); calculateBMI();">
      <label class="input-row"><span>Height (cm)</span>
        <input type="number" step="0.1" id="height" placeholder="e.g. 170" aria-label="Height in centimeters">
      </label>
      <label class="input-row"><span>Weight (kg)</span>
        <input type="number" step="0.1" id="weight" placeholder="e.g. 65" aria-label="Weight in kilograms">
      </label>
      <div class="diet-toggle" role="radiogroup" aria-label="Diet type">
        <label class="diet-option"><input type="radio" name="dietType" value="veg" checked> Veg</label>
        <label class="diet-option"><input type="radio" name="dietType" value="nonveg"> Non-Veg</label>
      </div>
      <div class="button-row">
        <button type="submit" class="primary">Calculate BMI</button>
        <button type="button" class="muted" onclick="resetAll()">Reset</button>
      </div>
    </form>

    <div class="result-box">
      <div class="charts-grid">
        <div id="bmiChart" class="gauge-card"></div>
        <div class="trend-card">
          <canvas id="bmiTrend" aria-label="BMI trend chart" role="img"></canvas>
        </div>
      </div>
      <div id="result" class="result-text">
        <div class="bmi-value">BMI: <span id="bmiValue">—</span></div>
        <div id="bmiCategory" class="bmi-category">—</div>
      </div>
    </div>

    <table class="bmi-table">
      <tr>
        <th>BMI Range</th>
        <th>Category</th>
      </tr>
      <tr>
        <td>Below 18.5</td>
        <td>Underweight</td>
      </tr>
      <tr>
        <td>18.5 – 24.9</td>
        <td>Normal</td>
      </tr>
      <tr>
        <td>25 – 29.9</td>
        <td>Overweight</td>
      </tr>
      <tr>
        <td>30 & above</td>
        <td>Obese</td>
      </tr>
    </table>

    <div id="dietPlan" class="diet-plan"></div>
  </div>

  <script src="script.js"></script>
</body>
</html>


















// Load Google Gauge and prepare Chart.js trend chart
google.charts.load('current', { packages: ['gauge'] });

let gaugeChart = null;
let gaugeData = null;
let bmiTrendChart = null;
let lastBmi = 0;

function initCharts() {
  // Initialize Google Gauge
  google.charts.setOnLoadCallback(() => {
    gaugeData = google.visualization.arrayToDataTable([
      ['Label', 'Value'],
      ['BMI', 0]
    ]);

    const options = {
      width: 260,
      height: 180,
      greenFrom: 18.5,
      greenTo: 24.9,
      yellowFrom: 25,
      yellowTo: 30,
      redFrom: 30,
      redTo: 45,
      minorTicks: 5,
      max: 45
    };

    gaugeChart = new google.visualization.Gauge(
      document.getElementById('bmiChart')
    );
    gaugeChart.draw(gaugeData, options);
  });

  // Initialize Chart.js line chart for BMI trend
  const ctx = document.getElementById('bmiTrend').getContext('2d');
  bmiTrendChart = new Chart(ctx, {
    type: 'line',
    data: {
      labels: [],
      datasets: [{
        label: 'BMI',
        data: [],
        borderColor: '#2563eb',
        backgroundColor: 'rgba(37,99,235,0.12)',
        fill: true,
        tension: 0.3,
        pointRadius: 4
      }]
    },
    options: {
      responsive: true,
      animation: { duration: 700 },
      scales: {
        y: { beginAtZero: false, suggestedMin: 10, suggestedMax: 45 }
      }
    }
  });
}

// Start chart initialization once file loads
window.addEventListener('load', () => {
  initCharts();
});

function calculateBMI() {
  try {
    const heightEl = document.getElementById('height');
  const weightEl = document.getElementById('weight');
  const height = parseFloat(heightEl.value);
  const weight = parseFloat(weightEl.value);
  const resultValEl = document.getElementById('bmiValue');
  const resultCatEl = document.getElementById('bmiCategory');
  const dietPlan = document.getElementById('dietPlan');

    // Validation
    if (!height || !weight || height <= 0 || weight <= 0 || isNaN(height) || isNaN(weight)) {
      resultCatEl.textContent = 'Please enter valid positive height and weight.';
      resultCatEl.className = '';
      dietPlan.innerHTML = '';
      return;
    }

  const bmi = +(weight / ((height / 100) ** 2));
  const bmiRounded = +bmi.toFixed(1);

  // Category & diet mapping
  let category = '';
  let cssClass = '';
  let dietItems = [];

    // Determine diet preference
    const dietTypeEl = document.querySelector('input[name="dietType"]:checked');
    const dietType = dietTypeEl ? dietTypeEl.value : 'veg';

  if (bmiRounded < 18.5) {
    category = 'Underweight';
    cssClass = 'under';
    dietItems = dietType === 'veg'
      ? ['Full-fat milk & yogurt', 'Bananas & dried fruits', 'Nuts and seeds', 'Rice & pasta', 'Healthy smoothies']
      : ['Full-fat milk & yogurt', 'Bananas & dried fruits', 'Nuts and seeds', 'Rice & eggs', 'Chicken kebabs (small portions)'];
  } else if (bmiRounded < 25) {
    category = 'Normal';
    cssClass = 'normal';
    dietItems = dietType === 'veg'
      ? ['Whole grains & roti', 'Dal & paneer', 'Fresh vegetables & fruits', 'Healthy fats in moderation', 'Stay hydrated']
      : ['Whole grains & roti', 'Lean fish or chicken', 'Fresh vegetables & fruits', 'Healthy fats in moderation', 'Stay hydrated'];
  } else if (bmiRounded < 30) {
    category = 'Overweight';
    cssClass = 'over';
    dietItems = dietType === 'veg'
      ? ['Oats & high-fiber cereals', 'Large salads & greens', 'Fruits & sprouts', 'Grilled tofu or paneer', 'Limit fried foods']
      : ['Oats & high-fiber cereals', 'Large salads & greens', 'Fruits & sprouts', 'Grilled fish & lean chicken', 'Limit fried foods'];
  } else {
    category = 'Obese';
    cssClass = 'obese';
    dietItems = dietType === 'veg'
      ? ['High-fiber vegetables', 'Whole legumes & pulses', 'Avoid sugary drinks & snacks', 'Portion control', 'Consult a nutritionist']
      : ['High-fiber vegetables', 'Whole legumes & pulses', 'Avoid sugary drinks & snacks', 'Portion control', 'Consult a nutritionist'];
  }

  // Animate BMI number count-up
  animateNumber(lastBmi, bmiRounded, 700, (val) => {
    resultValEl.textContent = val.toFixed(1);
  });
  lastBmi = bmiRounded;

  resultCatEl.textContent = category;
  resultCatEl.className = 'bmi-category ' + cssClass;

  // Update gauge when ready
  if (gaugeData && gaugeChart) {
    gaugeData.setValue(0, 1, Number(bmiRounded));
    gaugeChart.draw(gaugeData);
  }

  // Add to trend chart
  if (bmiTrendChart) {
    const label = new Date().toLocaleTimeString();
    bmiTrendChart.data.labels.push(label);
    bmiTrendChart.data.datasets[0].data.push(bmiRounded);
    // keep last 12 points
    if (bmiTrendChart.data.labels.length > 12) {
      bmiTrendChart.data.labels.shift();
      bmiTrendChart.data.datasets[0].data.shift();
    }
    bmiTrendChart.update();
  }

    // Render animated diet plan
    renderDietPlan(dietItems);
  } catch (err) {
    console.error('calculateBMI error:', err);
    const dietPlan = document.getElementById('dietPlan');
    if (dietPlan) {
      dietPlan.innerHTML = '<div class="plan-title">Error</div><div style="color:#b91c1c">An error occurred while calculating BMI. Check the console for details.</div>';
    }
  }
}

function animateNumber(from, to, duration, onUpdate) {
  const start = performance.now();
  function tick(now) {
    const t = Math.min(1, (now - start) / duration);
    const eased = t<.5 ? 2*t*t : -1 + (4 - 2*t)*t; // simple ease
    const val = from + (to - from) * eased;
    onUpdate(val);
    if (t < 1) requestAnimationFrame(tick);
  }
  requestAnimationFrame(tick);
}

function renderDietPlan(items) {
  const container = document.getElementById('dietPlan');
  container.innerHTML = '<div class="plan-title">Recommended Diet</div><div class="diet-items"></div>';
  const list = container.querySelector('.diet-items');
  items.forEach((it, idx) => {
    const el = document.createElement('div');
    el.className = 'diet-item';
    el.textContent = it;
    list.appendChild(el);
    // staggered pop animation
    setTimeout(() => el.classList.add('bounce'), 80 * idx + 60);
    // Fallback: ensure item becomes visible even if animations are blocked
    setTimeout(() => {
      if (getComputedStyle(el).opacity === '0') {
        el.style.opacity = '1';
        el.style.transform = 'none';
      }
    }, 120 * idx + 700);
  });
}

function resetAll() {
  document.getElementById('height').value = '';
  document.getElementById('weight').value = '';
  document.getElementById('bmiValue').textContent = '—';
  document.getElementById('bmiCategory').textContent = '—';
  document.getElementById('dietPlan').innerHTML = '';
  // reset diet toggle to veg
  const vegEl = document.querySelector('input[name="dietType"][value="veg"]');
  if (vegEl) vegEl.checked = true;
}

// Expose calculate for inline onclick compatibility if used elsewhere
window.calculateBMI = calculateBMI;
window.resetAll = resetAll;











* {
  box-sizing: border-box;
}

body {
  font-family: 'Poppins', sans-serif;
  background: linear-gradient(135deg,#e6eefc 0%, #f8f6ff 50%, #fef6f0 100%);
  margin: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
}

.container {
  background: linear-gradient(180deg, rgba(255,255,255,0.96), rgba(255,255,255,0.98));
  width: 720px;
  max-width: calc(100% - 40px);
  padding: 28px;
  border-radius: 14px;
  box-shadow: 0 12px 40px rgba(15,23,42,0.12);
}

h1 {
  text-align: left;
  font-size: 24px;
  margin: 0;
  color: #0f172a;
}

.card-header { margin-bottom: 16px }
.subtitle { color: #475569; margin-top: 6px; font-size: 13px }

.input-section { display:flex; gap:12px; flex-direction:column }
.input-row { display:flex; flex-direction:column }
.input-row span { font-size:13px; color:#475569; margin-bottom:6px }
.input-row input { width:100%; padding:12px; margin-bottom:0; border-radius:10px; border:1px solid #e6e9ef }

.diet-toggle { display:flex; gap:12px; margin-top:8px; align-items:center }
.diet-option { background:transparent; padding:6px 10px; border-radius:8px; border:1px solid transparent; cursor:pointer; font-weight:600; color:#0f172a }
.diet-option input { margin-right:8px }
.diet-option input[type="radio"] { accent-color: #2563eb }
.diet-option:hover { background:rgba(37,99,235,0.04); border-color:rgba(37,99,235,0.12) }

.button-row { display:flex; gap:10px }
.button-row .primary { flex:1; padding:12px; border-radius:10px; background:#2563eb; color:white; border:none; font-weight:600; cursor:pointer }
.button-row .primary:hover { background:#1e40af }
.button-row .muted { padding:12px; border-radius:10px; background:transparent; border:1px solid #cbd5e1; color:#0f172a; cursor:pointer }

.result-box { background: linear-gradient(90deg, rgba(230,236,255,0.6), rgba(240,254,245,0.6)); margin-top:18px; padding:14px; border-radius:12px; text-align:left }

.charts-grid { display:flex; gap:12px; align-items:center }
.gauge-card { width:260px; height:180px }
.trend-card { flex:1; background:linear-gradient(180deg, #fff, #fafafa); padding:8px; border-radius:10px }
.trend-card canvas { width:100% !important; height:160px !important }

.result-text { margin-top:12px; display:flex; gap:16px; align-items:center }
.bmi-value { font-size:20px; font-weight:700; color:#0f172a }
.bmi-category { font-size:16px; font-weight:600 }

.bmi-table {
  width: 100%;
  margin-top: 15px;
  border-collapse: collapse;
  font-size: 14px;
}

.bmi-table th,
.bmi-table td {
  border: 1px solid #d1d5db;
  padding: 8px;
  text-align: center;
}

.bmi-table th {
  background: #e5e7eb;
}

.diet-plan { margin-top:16px; font-size:14px; color:#111827 }
.diet-plan .plan-title { font-weight:700; margin-bottom:8px }
.diet-items { display:flex; gap:12px; flex-wrap:wrap }
.diet-item { background:linear-gradient(180deg,#ffffff,#f8fbff); padding:10px 12px; border-radius:10px; box-shadow:0 6px 18px rgba(2,6,23,0.06); min-width:160px; transform-origin:center; opacity:0; animation:fadeInUp 600ms ease forwards }
.diet-item.bounce { animation:popIn 650ms cubic-bezier(.2,.9,.3,1) forwards }

@keyframes fadeInUp { from { opacity:0; transform:translateY(10px) } to { opacity:1; transform:translateY(0) } }
@keyframes popIn { 0% { transform:scale(.85); opacity:0 } 60% { transform:scale(1.05); opacity:1 } 100% { transform:scale(1) } }

.bmi-category.under { color:#F59E0B }
.bmi-category.normal { color:#22C55E }
.bmi-category.over { color:#F97316 }
.bmi-category.obese { color:#DC2626 }